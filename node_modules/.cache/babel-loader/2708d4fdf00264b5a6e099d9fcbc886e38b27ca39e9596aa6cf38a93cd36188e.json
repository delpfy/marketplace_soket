{"ast":null,"code":"import _slicedToArray from\"C:/Users/cubar/source/react/soket_ts/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link}from\"react-router-dom\";import cross_sign from\"../../assets/img/cross_sign.png\";import append_icon from\"../../assets/img/append_icon.png\";import reduce_icon from\"../../assets/img/reduce_icon.png\";import{useAppDispatch,useAppSelector}from\"../../redux/hooks\";import{SetID,SetCategory}from\"../../redux/home/homeSlice\";import{IncExpences,DecExpences,RemoveItem,AddItemAmount,RemoveItemAmount,SetAmountItems}from\"../../redux/basket/basketSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BasketItemBlock=function BasketItemBlock(_ref){var item=_ref.item;var ITEMS_AMOUNT=useAppSelector(function(state){return state.basket.itemsAmount;});var ITEMS=useAppSelector(function(state){return state.basket.items;});var dispatch=useAppDispatch();var _useState=useState(item.props.image),_useState2=_slicedToArray(_useState,1),images=_useState2[0];var INC_EXPENCES=function INC_EXPENCES(price){dispatch(IncExpences(price));};var DEC_EXPENCES=function DEC_EXPENCES(price){dispatch(DecExpences(price));};var PUSH_AMOUNT_ITEMS=function PUSH_AMOUNT_ITEMS(item){dispatch(AddItemAmount(item));};var POP_AMOUNT_ITEMS=function POP_AMOUNT_ITEMS(item){dispatch(RemoveItemAmount(item));};var POP_ITEMS=function POP_ITEMS(item){dispatch(RemoveItem(item));};var SET_AMOUNT_ITEMS=function SET_AMOUNT_ITEMS(items){dispatch(SetAmountItems(items));};var Remove_Item=function Remove_Item(){DEC_EXPENCES(item.props.price*ITEMS_AMOUNT.filter(function(el){return el.id===item.props.id;}).length);POP_ITEMS(item);POP_AMOUNT_ITEMS(item);};var Append_ItemAmount=function Append_ItemAmount(){INC_EXPENCES(item.props.price);PUSH_AMOUNT_ITEMS({id:item.props.id,amount:ITEMS_AMOUNT.filter(function(el){return el.id===item.props.id;}).length+1});};var Reduce_ItemAmount=function Reduce_ItemAmount(){if(ITEMS_AMOUNT.filter(function(el){return el.id===item.props.id;}).length===1){Remove_Item();}else{DEC_EXPENCES(item.props.price);SET_AMOUNT_ITEMS(ITEMS_AMOUNT.filter(function(el){return Filter(el);}));}};var Filter=function Filter(elem){var itemAmount=ITEMS_AMOUNT.filter(function(el){return el.id===item.props.id;}).length;if(elem.id===item.props.id){if(elem.amount!==itemAmount){return elem;}}else{return elem;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"basket__item_body\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/item\",className:\"basket__item_link\",onClick:function onClick(){dispatch(SetCategory(item.props.category));dispatch(SetID(item.props.id));},children:[/*#__PURE__*/_jsx(\"div\",{className:\"basket__item_body_images\",children:images.map(function(image){return/*#__PURE__*/_jsx(\"img\",{className:\"basket__item_image\",src:image,alt:item.props.name},image);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"basket__item_info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"basket__item_info_name\",children:[\" \",\"\\u041D\\u0430\\u0437\\u0432\\u0430: \",item.props.name,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u0426\\u0456\\u043D\\u0430: \",item.props.price,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u0423 \\u043A\\u043E\\u0448\\u0438\\u043A\\u0443:\",\" \",ITEMS_AMOUNT.filter(function(el){return el.id===item.props.id;}).length]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"basket__item_AppendReduse\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"basket__item_AppendReduse_plus_bkgr\",children:/*#__PURE__*/_jsx(\"img\",{className:\"basket__item_AppendReduse_plus\",src:append_icon,alt:\"plus\",onClick:function onClick(){return Append_ItemAmount();}})}),/*#__PURE__*/_jsx(\"div\",{className:\"basket__item_AppendReduse_minus_bkgr\",children:/*#__PURE__*/_jsx(Link,{to:ITEMS_AMOUNT.length===1?\"/\":\"/basket\",className:\"basket__item_minus_link\",children:/*#__PURE__*/_jsx(\"img\",{className:\"basket__item_AppendReduse_minus\",src:reduce_icon,alt:\"minus\",onClick:function onClick(){return Reduce_ItemAmount();}})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"basket__item_cross\",children:/*#__PURE__*/_jsx(Link,{to:ITEMS.length===1?\"/\":\"/basket\",className:\"basket__item_cross_link\",children:/*#__PURE__*/_jsx(\"img\",{src:cross_sign,alt:\"cross\",onClick:function onClick(){return Remove_Item();}})})})]});};export default BasketItemBlock;","map":{"version":3,"names":["React","useState","Link","cross_sign","append_icon","reduce_icon","useAppDispatch","useAppSelector","SetID","SetCategory","IncExpences","DecExpences","RemoveItem","AddItemAmount","RemoveItemAmount","SetAmountItems","BasketItemBlock","item","ITEMS_AMOUNT","state","basket","itemsAmount","ITEMS","items","dispatch","props","image","images","INC_EXPENCES","price","DEC_EXPENCES","PUSH_AMOUNT_ITEMS","POP_AMOUNT_ITEMS","POP_ITEMS","SET_AMOUNT_ITEMS","Remove_Item","filter","el","id","length","Append_ItemAmount","amount","Reduce_ItemAmount","Filter","elem","itemAmount","category","map","name"],"sources":["C:/Users/cubar/source/react/soket_ts/src/Components/BasketElements/BasketItemBlock.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport cross_sign from \"../../assets/img/cross_sign.png\";\r\nimport append_icon from \"../../assets/img/append_icon.png\";\r\nimport reduce_icon from \"../../assets/img/reduce_icon.png\";\r\n\r\n\r\nimport { useAppDispatch, useAppSelector } from \"../../redux/hooks\";\r\nimport { IItems, IItemsAmount } from \"../../redux/types\";\r\nimport { SetID, SetCategory } from \"../../redux/home/homeSlice\";\r\nimport {\r\n  IncExpences,\r\n  DecExpences,\r\n  RemoveItem,\r\n  AddItemAmount,\r\n  RemoveItemAmount,\r\n  SetAmountItems,\r\n} from \"../../redux/basket/basketSlice\";\r\n\r\nexport const BasketItemBlock = ({ item }:any) => {\r\n  const ITEMS_AMOUNT = useAppSelector((state) => state.basket.itemsAmount);\r\n  const ITEMS = useAppSelector((state) => state.basket.items);\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const [images] = useState(item.props.image);\r\n\r\n  const INC_EXPENCES = (price: number) => {\r\n    dispatch(IncExpences(price));\r\n  };\r\n\r\n  const DEC_EXPENCES = (price: number) => {\r\n    dispatch(DecExpences(price));\r\n  };\r\n\r\n  const PUSH_AMOUNT_ITEMS = (item: IItemsAmount) => {\r\n    dispatch(AddItemAmount(item));\r\n  };\r\n\r\n  const POP_AMOUNT_ITEMS = (item: IItems) => {\r\n    dispatch(RemoveItemAmount(item));\r\n  };\r\n\r\n  const POP_ITEMS = (item: IItems) => {\r\n    dispatch(RemoveItem(item));\r\n  };\r\n\r\n  const SET_AMOUNT_ITEMS = (items: IItemsAmount[]) => {\r\n    dispatch(SetAmountItems(items));\r\n  };\r\n\r\n  const Remove_Item = () => {\r\n    DEC_EXPENCES(\r\n      item.props.price *\r\n        ITEMS_AMOUNT.filter((el) => el.id === item.props.id).length\r\n    );\r\n    POP_ITEMS(item);\r\n    POP_AMOUNT_ITEMS(item);\r\n  };\r\n\r\n  const Append_ItemAmount = () => {\r\n    INC_EXPENCES(item.props.price);\r\n    PUSH_AMOUNT_ITEMS({\r\n      id: item.props.id,\r\n      amount: ITEMS_AMOUNT.filter((el) => el.id === item.props.id).length + 1,\r\n    });\r\n  };\r\n\r\n  const Reduce_ItemAmount = () => {\r\n    if (ITEMS_AMOUNT.filter((el) => el.id === item.props.id).length === 1) {\r\n      Remove_Item();\r\n    } else {\r\n      DEC_EXPENCES(item.props.price);\r\n      \r\n      SET_AMOUNT_ITEMS(ITEMS_AMOUNT.filter((el) => Filter(el)));\r\n    }\r\n  };\r\n\r\n  const Filter = (elem: IItemsAmount) => {\r\n    const itemAmount = ITEMS_AMOUNT.filter(\r\n      (el) => el.id === item.props.id\r\n    ).length;\r\n\r\n    if (elem.id === item.props.id) {\r\n      if (elem.amount !== itemAmount) {\r\n        return elem;\r\n      }\r\n    } else {\r\n      return elem;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"basket__item_body\">\r\n      <Link\r\n        to=\"/item\"\r\n        className=\"basket__item_link\"\r\n        onClick={() => {\r\n          dispatch(SetCategory(item.props.category));\r\n          dispatch(SetID(item.props.id));\r\n        }}\r\n      >\r\n        <div className=\"basket__item_body_images\">\r\n          {images.map((image:string) => (\r\n            <img\r\n            key={image}\r\n              className=\"basket__item_image\"\r\n              src={image}\r\n              alt={item.props.name}\r\n            />\r\n          ))}\r\n        </div>\r\n        <div className=\"basket__item_info\">\r\n          <div className=\"basket__item_info_name\">\r\n            {\" \"}\r\n            Назва: {item.props.name}{\" \"}\r\n          </div>\r\n          <div>Ціна: {item.props.price} </div>\r\n          <div>\r\n            У кошику:{\" \"}\r\n            {ITEMS_AMOUNT.filter((el) => el.id === item.props.id).length}\r\n          </div>\r\n        </div>\r\n      </Link>\r\n      <div className=\"basket__item_AppendReduse\">\r\n        <div className=\"basket__item_AppendReduse_plus_bkgr\">\r\n          <img\r\n            className=\"basket__item_AppendReduse_plus\"\r\n            src={append_icon}\r\n            alt=\"plus\"\r\n            onClick={() => Append_ItemAmount()}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"basket__item_AppendReduse_minus_bkgr\">\r\n          <Link\r\n            to={ITEMS_AMOUNT.length === 1 ? \"/\" : \"/basket\"}\r\n            className=\"basket__item_minus_link\"\r\n          >\r\n            <img\r\n              className=\"basket__item_AppendReduse_minus\"\r\n              src={reduce_icon}\r\n              alt=\"minus\"\r\n              onClick={() => Reduce_ItemAmount()}\r\n            />\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      <div className=\"basket__item_cross\">\r\n        <Link\r\n          to={ITEMS.length === 1 ? \"/\" : \"/basket\"}\r\n          className=\"basket__item_cross_link\"\r\n        >\r\n          <img src={cross_sign} alt=\"cross\" onClick={() => Remove_Item()} />\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BasketItemBlock;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}